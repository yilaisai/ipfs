(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b9b9bd6"],{"692f":function(t,e,n){"use strict";var a=n("c584"),i=n.n(a);i.a},"766f":function(t,e,n){t.exports=n.p+"img/coffee.21989a50.svg"},9331:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_update-page"},[a("img",{attrs:{src:n("766f"),alt:""}}),a("van-progress",{attrs:{percentage:t.percentage,color:"#42C1CA"}}),a("p",[t._v(t._s(t.tipsText))]),a("p",[t._v(t._s(t.kToM(t.downloadedSize))+"M/"+t._s(t.kToM(t.totalSize))+"M")])],1)},i=[],o={data:function(){return{downloadedSize:0,totalSize:0,tipsText:"下载更新中,请勿退出程序..."}},mounted:function(){"apk"==this.$route.query.type||"wgt"==this.$route.query.type?this.createDownload(this.$route.query.downloadUrl):this.$toast("处理失败")},methods:{createDownload:function(t){var e=this,n=plus.downloader.createDownload(t,{},(function(t,n){200==n?console.log("Download success: "+t.filename):e.$dialog.alert({title:"提示",message:"更新失败，请退出应用稍后再试！"}).then((function(){plus.runtime.quit()}))}));n.addEventListener("statechanged",(function(t,n){e.downloadedSize=parseInt(t.downloadedSize/1024),0==e.totalSize&&(e.totalSize=parseInt(t.totalSize/1024)),4==t.state&&200==n&&("apk"==e.$route.query.type?(plus.runtime.install(t.filename),plus.runtime.quit()):e.installWgt(t.filename))}),!1),n.start()},kToM:function(t){return this.$decimalNumber(t/1024,2)},installWgt:function(t){var e=this;this.tipsText="资源包解压安装中...",plus.runtime.install(t,{},(function(){e.tipsText="应用资源更新完成",plus.nativeUI.alert("应用资源更新完成！",(function(){plus.runtime.restart()}))}),(function(n){e.tipsText="安装wgt文件失败["+n.code+"]："+n.message+"【"+t+"】",plus.nativeUI.alert("安装wgt文件失败["+n.code+"]："+n.message)}))}},computed:{percentage:function(){return this.downloadedSize<=0||this.totalSize<=0?0:parseInt(this.downloadedSize/this.totalSize*100)}}},s=o,l=(n("692f"),n("9ca4")),r=Object(l["a"])(s,a,i,!1,null,"2ad8f275",null);e["default"]=r.exports},c584:function(t,e,n){}}]);